# [Chapter 5] 빌더 패턴

빌더 패턴은 추상 팩토리를 확장하여 크고 복잡한 객체를 생성할 수 있습니다.

## 객체의 종류

- 단일 객체
    - 팩토리, 팩토리 메서드, 추상 팩토리 모두 단일 객체를 사용한다.
- 복합 객체
    
복합 객체는 구조적 의존 관계를 통해 객체를 확장한다.

복합 객체는 객체가 생성된 후에도 다른 객체와 관계를 설정해 동적 확장할 수 있다.

많은 디자인 패턴의 원리와 목적은 상속 결합을 배제하고 의존 관계의 복합 객체로 변경하여 처리하는 것이다.

복합 객체를 생성할 때는 객체의 구조 순서에 맞게 단계별로 생성된다.

팩토리, 팩토리 메서드, 추상 메서드 패턴으로는 복합 객체를 생성 할 수 없다.

반면 빌더 패턴은 복잡한 구조의 복합 객체를 생성하는 로직을 별도로 분리하여 객체 생성을 처리한다.

## Computer 클래스 설계

## 빌더

- 빌더 패턴은 복잡한 구조를 가진 복합 객체의 생성 과정을 분리하여 처리하는 패턴이다.
- 복합 객체의 생성 과정을 단계별로 분리함으로써 복합 객체의 생성을 일반화할 수 있다.

### 빌더 패턴

- 팩토리 패턴 또한 요청한 객체의 생성 과정을 분리한다.
- 팩토리 패턴은 단일 클래스의 객체만 생성하고 반환하므로 복합 객체일 경우 팩토리 패턴을 적용할 수 없다.
- 복합 객체는 동적으로 객체를 확장할 수 있어 효율적이다. 빌더 패턴은 복합 객체 생성 과정을 별도의 독립된 클래스로 관리한다.


### 빌더 추상화

추상 클래스인 Builder는 추상 메서드 build()를 선언한다. build()는 복합 객체를 생성하는 로직을 하위 클래스에 위임한다.

### ConcateBuilder

하위 클래스는 실제 복합 객체의 생성 과정을 위임 받고, 빌더 로직을 구체화하는 하위 클래스(ConcreteBuilder)는 상위 추상 클래스(builder)를 상속 받는다.

추상화를 적용하면 여러 개의 하위 클래스를 만들어 다형성을 적용할 수 있다.

### 추상 메서드

추상 메서드 build() 안에는 복합 객체 생성을 위한 처리 로직들이 들어 있다. 빌더 생성 로직을 별도의 알고리즘으로 분리하여 외부로부터 주입받을 수도 있다.

## 알고리즘

빌더 패턴은 복합 객체의 생성 로직을 별도 클래스로 분리하여 분리한 로직을 알고리즘이라고 부른다.

### 전략 패턴

> 전략 패턴은 외부에서 처리 객체를 전달받아 수행하는 패턴이다.


ConcreateBuilder

- 의존성 주입 받은 알고리즘 객체로 복잡한 객체의 생성을 처리한다.
- 빌더 패턴은 전략 패턴의 알고리즘을 응용햐여 복합 객체를 생성한다.

### 추상화

- 빌더 패턴은 일관적인 알고리즘을 적용하면서 다형성을 유지하기 위해 추상화 구조를 적용한다.
- 빌더 패턴은 추상 팩토리를 확장한 패턴이다.
- 하위 클래스에는 복합 객체를 생성하기 위한 단계별 행동이 정의되어 있다.
- build()에서는 분리된 단계별 메서드를 빌더 객체에서 호출하고 조립한다.
- 빌더 클래스는 어떤 복합 객체가 만들어지는지 구체적으로 알지 못한다.
- 실제 객체는 알고리즘에 의해 생성된다.

`빌더 패턴은 언제든지 알고리즘을 교체하여 다양한 복합 객체를 동적으로 생성할 수 있다.`

## 관련 패턴

### 템플릿 메서드

빌더 패턴의 Builder는 객체를 건축하는 행위이며 실제로 객체 생성 로직을 분리한다. 상위 클래스에서는 추상 메서드를 선언하기만 하고, 하위 클래스에는 실제 구현 메서드를 오버라이드 한다.

### 복합체 패턴

복합 객체는 다른 객체를 포함하여 복합체 패턴과 유사한 구조를 가진다.

### 추상 팩토리

추상화를 통해 그룹을 관리하는 것은 추상 팩토리와 유사하다.

### 파샤드 패턴

클라이언트는 빌더 패턴의 복잡한 구조를 알 필요가 없으며, 외부에 공개된 생성 메서드만 호출하면 된다. 이는 API와 같은 파사드 패턴과 유사하다.

## 정리

빌더 패턴은 추상 팩토리 패턴을 확장하고, 복잡한 단계를 가진 복합 객체를 생성할 수 있다.

빌더 패턴의 경우 만들고자 하는 부품들이 모여야 의미가 있다. 추상 팩토리 패턴은 각각의 부품에만 의미를 부여한다.