# 43장. Autoscaler - HPA

## Autoscaler

### 1. HPA(Horizontal Pod Autoscaler)

* 파드의 갯수를 늘린다.
  * HPA를 등록해둔 상황에서 Service의 모든 트래픽이 하나의 Pod에 흐르고있을 때 Pod에 흐르는 트래픽이 많아져서 HPA에 걸어둔 메모리나 CPU를 초과한다고 해보자. 이 경우에 HPA는 이런 자원 사용량들을 감지하고 있다가 Controller에 replica를 1에서 2로 늘리도록 요청하고, Pod를 하나 더 생성하여 트래픽을 분산시키게 된다.
  * 기동이 빠르고 Stateless App 에 권장된다. (master, slave와 같이 역할이 분배되어 있는 파드가 아닌 경우)&#x20;

![](<../../.gitbook/assets/image (197).png>)![](<../../.gitbook/assets/image (192).png>)



### 2. VPA(Vertical Pod Autoscaler)

* 파드의 리소스를 수직으로 증가시킨다.
* stateful app일 경우 권장된다.
* 한 Controller에 HPA와 함께 안됨.

![](<../../.gitbook/assets/image (196).png>)![](<../../.gitbook/assets/image (191).png>)

### 3. CA(Cluster Autoscaler)

* 클러스터에 노드를 추가한다.
* 내 클러스터에 있는 모든 노드에 자원이 없을 경우 동적으로 워커노드를 추가해준다.
* 워커노드를 추가해 줄때는 CA에 생성 요청을 하면 미리 등록해둔 Cloud Provider를 통해 Pod를 생성했다가, 클러스터에 파드가 삭제되어 자원이 남으면 provider에 있던 pod를 내 클러스터로 옮겨온다.

![](<../../.gitbook/assets/image (195).png>)![](<../../.gitbook/assets/image (190).png>)

