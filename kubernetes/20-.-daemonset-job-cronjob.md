---
description: 'https://kubetm.github.io/k8s/04-beginner-controller/daemonset/'
---

# 20장. DaemonSet, Job, CronJob

## DaemonSet

* 각 노드들에 자원이 다르게 남아있는 상황에 ReplicaSet의 경우 자원이 많이 남아있으면 파드를 많이 배치하고, Node 3처럼 자원이 없으면 파드를 배치안할 수 있음.
* 반면 데몬셋은 노드의 자원 상태와 상관 없이 모든 노드에 파드가 하나씩 생성됨.
* 데몬셋을 사용하는 경우\) 
  * 각 노드의 성능 수집을 하는 경우 \(프로메테우스\)
  * 각 노드의 로그를 수집하는 경우 \(Fluentd와 같이 로그 정보를 수집하는 경우\)
  * 각 노드를 스토리지에 활용하는 경우 \(GlusterFS\)

![](../.gitbook/assets/image%20%2865%29.png)

## Job & CronJob

* **Job**
  * 파드가 노드에 만들어지는 경우
    * 파드를 직접 만드는 경우
    * ReplicaSet을 통해 Pod가 만들어지는 경우
    * Job을 통해 Pod가 만들어지는 경우
  * 만약 노드가 죽으면?
    * 파드를 직접 만드는 경우 =&gt; **서비스 다운**
    * ReplicaSet을 통해 Pod가 만들어지는 경우 =&gt; Node2에 Recreate \(일을 하지 않으면 파드를 Restart, 무슨 일이 있어도 서비스가 유지되어야 하는 경우 사용\)
    * Job을 통해 Pod가 만들어지는 경우. =&gt; Node2에 Recreate\(일을 하지 않으면 파드는 종료, 자원을 사용하지 않는 상태로 멈추는 FINISH 파드에 들어가서 로그 확인 가능.\)
  * Recreate
    * 파드를 다시 만들어주기 때문에 Pod의 이름이나 IP가 변경
  * Restart
    * 파드 안에 컨테이너만 재기동되어 이름이나 IP 유지
* **CronJob**
  * Job들을 특정 시간에 반복해서 사용
  * 사용 예시
    * Backup 매일 새벽마다 데이터 백업을 하는 경우
    * Cheking 주기적인 업데이트 
    * Messaging 일정 주기마다 메시지를 보내야 하는 경

![](../.gitbook/assets/image%20%2864%29.png)



